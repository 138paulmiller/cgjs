<!DOCTYPE html>
<html>
 <head>
   <!--
   Internet required
   <script src="http://threejs.org/build/three.min.js"></script>
   -->
   <script src="js/three.min.js"></script>
   <script src="js/threex.rendererstats.js"> </script>
   <script src="js/draw.js" ></script>
   <script src="js/points.js" ></script>
   <link rel="stylesheet" type="text/css" href="css/style.css">

   <title>Draw138</title>
   <div  class="dropdown">
     <button class="dropbtn" id="dropbutton">Menu</button>
     <div class="dropdown-content">
        <div style="border:1px solid #940044;">
          Auto Clear:
          <label class="switch">
            <input type="checkbox" id="autoClear">
            <div class="slider"></div>
          </label><br>
        </div>
         n:<input id="n" type="number" value = "200" style="width:50px"><br>
         t:<input id="t" type="text" value = "Math.PI*20" size="10">
         r:<input id="r" type="number" value = "100" style="width:50px"><br>
         x(t):<input id="xFunc" type="text" value = "Math.sqrt(t*2)*Math.sin(t)*r;" size="30"><br>
         y(t):<input id="yFunc" type="text" value = "Math.sqrt(t*2)*Math.cos(t)*r;" size="30"><br>
         z(t):<input id="zFunc" type="text" value = "0;" size="30"><br>

         Rotation:<br>
         x:<input id="rotX" type="number" value = "1" style="width:50px">
         y:<input id="rotY" type="number" value = "1" style="width:50px">
         z:<input id="rotZ" type="number" value = "0" style="width:50px"><br>

         Dynamic:
         <label class="switch">
           <input type="checkbox" id="dynamicPoints">
           <div class="slider"></div>
         </label><br>
         xVel(t):<input id="xVel" type="text" value = "Math.sin(t);" size="30"><br>
         yVel(t):<input id="yVel" type="text" value = "Math.cos(t);" size="30"><br>
         zVel(t):<input id="zVel" type="text" value = "Math.sin(t);" size="30"><br>

         <button class="btn" id="generatePoints" onclick="generatePoints()">Generate Points</input>
        <button class="btn" id="test" onclick="test()">Test</input>

     </div>
   </div>
 </head>
 <body >
   <script>
   var d= drawer(); //create drawing object
   var p = points(); //factory for points
   //define generation functions
   function generatePoints(){
     d.clearScene();
     var n = eval(document.getElementById("n").value);
     var r = eval(document.getElementById("r").value);
     var t = eval(document.getElementById("t").value);

     var xStr = document.getElementById("xFunc").value;
     var yStr = document.getElementById("yFunc").value;
     var zStr = document.getElementById("zFunc").value;

     var x = function(t) {return eval(xStr.toString());};
     var y = function(t) {return eval(yStr.toString());};
     var z = function(t) {return eval(zStr.toString());};

     var rotX = function(t) {return eval(document.getElementById("rotX").value.toString());};
     var rotY = function(t) {return eval(document.getElementById("rotY").value.toString());};
     var rotZ = function(t) {return eval(document.getElementById("rotZ").value.toString());};
     if(document.getElementById("dynamicPoints").checked){
       var xVel = function(t) {return eval(document.getElementById("xVel").value.toString());};
       var yVel = function(t) {return eval(document.getElementById("yVel").value.toString());};
       var zVel = function(t) {return eval(document.getElementById("zVel").value.toString());};
       var min = -1.0*r;
       var max = r;
       var range=[min,max];
       d.addObject(p.makeDynamicParametricPoints(n, 5, x,y,z, xVel, yVel, zVel, rotX, rotY, rotZ,range), "p1");
     }else{
       d.addObject(p.makeParametricPoints(n, 5, x,y,z, 0.01, "p1"));
     }
  }
  function test(){
    var n = eval(document.getElementById("n").value);
    var r = eval(document.getElementById("r").value);
    d.addObject(p.makeRingOfPoints(n, r, 30));
  }
   </script>
 </body>
</html>
